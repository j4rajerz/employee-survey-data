<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>نظرسنجی عملکرد کارکنان</title>
    <link rel="stylesheet" href="style.css">
    <!-- فونت فارسی -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">

        <!-- انتخاب نقش -->
        <div id="role-selection" class="card" style="text-align:center;">
            <div class="card-title">انتخاب نقش</div>
            <button id="employee-btn" class="button">کارمند</button>
            <button id="manager-btn" class="button">مدیر</button>
        </div>

        <!-- پنل کارمند -->
        <div id="employee-panel" class="card" style="display:none;">
            <div class="card-title">نظرسنجی کارمند</div>
            <div id="manager-buttons"></div>
            <div id="survey-container"></div>
            <button id="final-submit" class="button">ثبت نهایی نظرسنجی</button>
        </div>

        <!-- پنل مدیر -->
        <div id="manager-panel" class="card" style="display:none;">
            <div class="card-title">داشبورد مدیر</div>
            <div>
                تعداد نظرسنجی‌های ثبت‌شده: <span id="survey-count"></span><br>
                مجموع بازدید: <span id="visit-count"></span>
            </div>
            <canvas id="chart" height="120"></canvas>
            <div>
                <ul id="managers-list"></ul>
                <button id="add-manager-btn" class="button">افزودن معاون</button>
                <button id="add-factor-btn" class="button">افزودن شاخص</button>
            </div>
            <button id="refresh-btn" class="button">بروزرسانی داشبورد</button>
            <button id="logout-btn" class="button">خروج</button>
        </div>
    </div>
    <!-- ماژول‌های جاوااسکریپت -->
    <script type="module">
        import './github.js';
        import { initManager } from './manager.js';
        import './employee.js';

        document.getElementById('employee-btn').onclick = () => {
            document.getElementById('role-selection').style.display = 'none';
            // employee.js بصورت خودکار init را روی window.onload اجرا می‌کند
            document.getElementById('employee-panel').style.display = "block";
        };
        document.getElementById('manager-btn').onclick = () => {
            document.getElementById('role-selection').style.display = 'none';
            window.initManager();
        };
    </script>
</body>
</html>